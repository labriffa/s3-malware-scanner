'use strict';


const MessageQueue = require('./MessageQueue');
const fs = require('fs');
const sqsSendMessageResponse = JSON.parse(fs.readFileSync(`${__dirname}/mockResponses/sqs/sendMessageResponse.json`));

/**
 * A mock message queue that mimics AWS SQS responses for offline testing
 */
module.exports = class MockSQSMessageQueue extends MessageQueue {
	constructor() {
		super();
		this.messages = [];
	}

	/**
	 * Populates the internal message queue and fires the callback
	 * 
	 * @param {*} message 
	 * @param {*} callback 
	 */
	sendMessage(message, callback) {
		this.messages.push(message);
		callback(null, sqsSendMessageResponse);
	}

	getMessages() {
		return this.messages;
	}
};